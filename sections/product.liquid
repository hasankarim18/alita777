{%- liquid
  assign current_variant = product.selected_or_first_available_variant
-%}

<div>
  <div class="max-w-7xl mx-auto my-0 relative">
    <h1>Product.liquid</h1>
    <hr>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-5  ">
      <div>
        {% render 'product-media', product: product %}
      </div>
      {% comment %} product info {% endcomment %}
      <div class="relative">
        <div style="height: fit-content;" class="sticky top-5 p-2 ">
          {% form 'product', product %}
            {% comment %} vendor {% endcomment %}
            <input type="hidden" name="id" value="{{ current_variant.id  }}">
            {% for block in section.blocks %}
              {% case block.type %}
                {% when 'vendor' %}
                  {% render 'product-vendor-1', product: product %}
                {% when 'product_title' %}
                  {% render 'product-title-1', product: product %}
                {% when 'product_price' %}
                  {% render 'product-price-1', current_variant: current_variant %}
                {% when 'description' %}
                  {% render 'product-description-1', product: product %}
                {% when 'variant_selector_all' %}
                  {% render 'product-variant-selector-all-1', product: product %}
                {% when 'quantity' %}
                  {% comment %} Quantity {% endcomment %}
                  <div class="my-3">
                    <label for="quantity-{{ section.id }}">Quantity</label>
                    <div class="my-2">
                      <input
                        class="w-full border px-3 py-3"
                        type="number"
                        name="quantity"
                        id="quantity-{{ section.id }}"
                        value="1"
                        min="1"
                      >
                    </div>
                  </div>

                {% when 'variant_selector_separate_select' %}
                  {% comment %} variant selector separate select variant_selector_separate_select {% endcomment %}
                  <div class="my-3">
                    <h2>Variant Selector Separate Select</h2>
                    {% unless product.has_only_default_variant %}
                      <div data-url="{{ product.url }}" data-section{{ section.id }}>
                        {%- for option in product.options_with_values -%}
                          <label for="option-{{ section.id}}-{{ forloop.index0 }}"> {{ option.name }} </label>
                          <div class="my-2">
                            <select
                              class="w-full border p-4 "
                              name="options[{{ option.name |  escape }}]"
                              id="option-{{ section.id}}-{{ forloop.index0 }}"
                            >
                              {% for value in option.values %}
                                <option
                                  {% if option.selected_value == value %}
                                    selected
                                  {% endif %}
                                  value="{{ value }}"
                                >
                                  {{ value }}
                                </option>
                              {% endfor %}
                            </select>
                          </div>
                        {%- endfor -%}
                      </div>
                    {% endunless %}
                  </div>
                {% when 'variant_selector_swatch' %}
                  <div>
                    <h2 class="text-2xl">Variant selector swatch</h2>
                  </div>
                {% else %}

              {% endcase %}
            {% endfor %}

            {% comment %} add to cart button {% endcomment %}
            <div class="my-3">
              add
              <button
                {% if current_variant.available == false %}
                  disabled
                {% endif %}
                type="submit"
                name="add"
                class="w-full px-6 py-4 bg-gray-900 hover:bg-gray-700 cursor-pointer text-white"
              >
                {%- if current_variant.available == false -%}
                  Sold out
                {%- else -%}
                  Add to cart
                {%- endif -%}
              </button>
            </div>
          {% endform %}
        </div>
      </div>
      {% comment %} product info end {% endcomment %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Product Template 1",
  "tag": "section",
  "class": "section",
  "settings": [],
  "blocks": [
    {
      "type": "vendor",
      "limit": 1,
      "name": "Prodcut Vendor",
      "settings": []
    },
    {
      "type": "product_title",
      "limit": 1,
      "name": "Product Title",
      "settings": []
    },
    {
      "type": "product_price",
      "limit": 1,
      "name": "Product Price",
      "settings": []
    },
    {
      "type": "description",
      "limit": 1,
      "name": "Description",
      "settings": []
    },
    {
      "type": "variant_selector_all",
      "limit": 1,
      "name": "Variant Selector All",
      "settings": []
    },
    {
      "type": "variant_selector_separate_select",
      "limit": 1,
      "name": "Variant Selector Separate Select",
      "settings": []
    },
    {
      "type": "variant_selector_swatch",
      "limit": 1,
      "name": "Variant Selector Swatch",
      "settings": []
    },
    {
      "type": "quantity",
      "limit": 1,
      "name": "Quantity",
      "settings": []
    },
    {
      "type": "add_to_cart",
      "limit": 1,
      "name": "Add to Cart",
      "settings": []
    }
  ],
  "presets": [
    {
      "name": "Product Template 1",
      "settings": {}
    }
  ]
}
{% endschema %}
